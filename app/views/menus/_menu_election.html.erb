<!-- menu election -->

<% if !@dinner.menu.finalized? %>
  <%= form_for @dinner.menu, method: "PATCH", remote: true do |f|%>
    <div id="appetizers">
      <h3>Appetizers</h3>
      <div class="recipe-card horizontal-scroll">
      <% @dinner.menu.appetizers.each do |topic| %>
        <tr>
          <td><%= topic.title %></td>
          <td><%= topic.description %></td>
          <td><%= pluralize(topic.votes.count, "vote") %></td>
          <td><%= button_to '+1', upvote_topic_path(topic), method: :post %></td>
          <td><%= link_to 'Show', topic %></td>
          <td><%= link_to 'Edit', edit_topic_path(topic) %></td>
          <td><%= link_to 'Destroy', topic, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
        <% end %>
      </div>
    </div>
    <div id="sides">
      <h3>Sides</h3>
        <div class="recipe-card horizontal-scroll">
          <%= f.collection_check_boxes(:recipes, @dinner.menu.sides, :id, :recipe_card) %>
        </div>
      </div>
    <div id="mains">
      <h3>Mains</h3>
        <div class="recipe-card horizontal-scroll">
          <%= f.collection_check_boxes(:recipes, @dinner.menu.mains, :id, :recipe_card) %>
        </div>
      </div>
    <div id="desserts">
      <h3>Desserts</h3>
        <div class="recipe-card horizontal-scroll">
          <%= f.collection_check_boxes(:recipes, @dinner.menu.desserts, :id, :recipe_card) %>
        </div>
    </div>
    <%= f.submit "Submit!" %>
  <% end %>
<% else %>
  <%= render 'menus/final_menu', :dinner => @dinner %>
  
<% end %>


